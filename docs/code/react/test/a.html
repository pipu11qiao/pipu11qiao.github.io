<html>
  <body>
    <script>
            var channel1 = new MessageChannel();
      var port1 = channel1.port1;
      var port2 = channel1.port2;

      port1.onmessage=function(event){
        console.log("port1收到port2的数据"  + event.data);
      }
      port2.onmessage=function(event){
        console.log("port2收到port1的数据"  + event.data);
      }
      port1.postMessage("发送给port2");
      port2.postMessage("发送给port1");
    </script>
  </body>
</html>
